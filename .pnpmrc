# =============================================================================
# PNPM Configuration - Security and Performance Optimized
# =============================================================================

# -----------------------------------------------------------------------------
# Security Settings
# -----------------------------------------------------------------------------

# Supply chain security - Minimum package age (72 hours = 259200000ms)
# This helps prevent typosquatting and supply chain attacks
# Packages must be at least 72 hours old before installation
registry-supports-time-field=true
# Note: minimum-age is not yet supported in .pnpmrc, use .npmrc instead

# Audit configuration
audit-level=moderate

# Prevent execution of lifecycle scripts from dependencies
ignore-scripts=false

# Enable signature verification
verify-store-integrity=true

# -----------------------------------------------------------------------------
# Performance Settings
# -----------------------------------------------------------------------------

# Network and concurrency
network-concurrency=16
child-concurrency=5
fetch-retries=3
fetch-retry-factor=10
fetch-retry-mintimeout=10000
fetch-retry-maxtimeout=60000

# Store configuration
# store-dir=~/.pnpm-store
# cache-dir=~/.pnpm-cache

# Symlink settings for better performance
symlink=true
enable-pre-post-scripts=true

# -----------------------------------------------------------------------------
# Dependency Resolution
# -----------------------------------------------------------------------------

# Resolution strategy
resolution-mode=highest
prefer-workspace-packages=true

# Hoisting configuration
hoist=true
hoist-pattern[]=*eslint*
hoist-pattern[]=*prettier*
hoist-pattern[]=*typescript*

# Shamefully hoist only when necessary
shamefully-hoist=false

# Public hoist pattern for tools that need global access
public-hoist-pattern[]=*cli*
public-hoist-pattern[]=*bin*

# -----------------------------------------------------------------------------
# Lockfile and Installation
# -----------------------------------------------------------------------------

# Lockfile settings
lockfile=true
prefer-frozen-lockfile=true
lockfile-include-tarball-url=true

# Installation behavior
auto-install-peers=true
dedupe-peer-dependents=true
strict-peer-dependencies=false

# Save configuration
save-exact=false
save-workspace-protocol=rolling

# -----------------------------------------------------------------------------
# Registry and Publishing
# -----------------------------------------------------------------------------

# Default registry
registry=https://registry.npmjs.org/

# Scoped registries
@d0whc3r:registry=https://registry.npmjs.org/

# Publishing
publish-branch=master
access=public

# -----------------------------------------------------------------------------
# Development Settings
# -----------------------------------------------------------------------------

# Progress and logging
progress=true
reporter=default
log-level=warn

# Optional dependencies
optional=true
include-workspace-root=true

# Engine checking
engine-strict=true

# -----------------------------------------------------------------------------
# CI/CD Optimizations
# -----------------------------------------------------------------------------

# These settings are automatically optimized for CI environments
# but can be explicitly set here for consistency

# Disable interactive prompts in CI
# ci=true (automatically detected)

# Use offline mode when possible
# prefer-offline=true (set by CI)

# Disable progress in CI for cleaner logs
# progress=false (set by CI)

# -----------------------------------------------------------------------------
# Experimental Features
# -----------------------------------------------------------------------------

# Enable experimental features (use with caution)
# experimental-features=true

# Use hard links instead of symlinks (can improve performance on some systems)
# package-import-method=hardlink

# Enable content addressable storage
# use-node-version=lts

# -----------------------------------------------------------------------------
# Workspace Specific Settings
# -----------------------------------------------------------------------------

# Link workspace packages
link-workspace-packages=true

# Shared workspace lockfile
shared-workspace-lockfile=true

# Workspace concurrency
workspace-concurrency=4

# Filter settings for workspace operations
# recursive=true
# if-present=true
